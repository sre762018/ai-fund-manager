# AI 基金分析师 (ai-fund-manager)

> 一款基于 DeepSeek AI 的单页基金分析工具，无需后端，纯前端运行，数据实时拉取自东方财富/天天基金。

---

## ✨ 功能特性

### 基金管理
- 输入 6 位基金代码或按名称搜索添加（JSONP 实时搜索）
- 预设基金：015740 / 017470 / 161226 / 023551
- 可编辑每只基金的**持仓金额**与**成本净值**，实时计算盈亏
- 数据持久化到 `localStorage`，刷新不丢失

### 数据获取（纯前端，无跨域）
- **实时估值**：通过 JSONP 拉取天天基金实时估算净值（`fundgz.1234567.com.cn`）
- **历史净值**：加载东方财富 pingzhongdata JS 文件，提取全量净值曲线（`fund.eastmoney.com`）
- **基金搜索**：东方财富搜索 API，支持代码/名称模糊匹配
- 所有请求串行处理，script 标签加载，12 秒超时自动清理

### 技术指标计算
| 指标 | 说明 |
|------|------|
| 日涨跌 | 最新净值与前日之差 |
| 区间涨跌 | 所选周期首尾涨跌幅 |
| 近 3 / 5 日 | 短期动量 |
| 连续天数 | 连涨/连跌天数（含方向） |
| ROC | 5 日变化率 |
| 波动率 | 日收益率标准差 |
| MA5 / MA20 | 5 日 / 20 日均线 |
| 综合评分 | 多维加权评分，驱动买卖建议 |

**评分公式：**
```
score = 区间涨跌×0.35 + 近5日×0.25 + 连续天数×方向×0.8 + ROC×0.15
MA5 > MA20 加 0.5，否则减 0.5
```

| 评分区间 | 建议 | 颜色 |
|---------|------|------|
| < -6 | 强烈加仓 | 深绿 |
| -6 ~ -3 | 买入 | 浅绿 |
| -3 ~ 3 | 观望 | 黄 |
| 3 ~ 6 | 卖出 | 浅红 |
| > 6 | 大幅减仓 | 深红 |

### AI 深度分析（DeepSeek）
- 调用 `deepseek-chat` 模型，流式实时输出分析报告
- 包含：大盘环境判断 → 逐只基金分析 → 组合建议 → 今日操作清单
- API Key 由用户自行输入（password 输入框），保存在 `localStorage`，**不写死不上传**
- 未设置 Key 时跳过 AI 分析，数据拉取仍正常进行

### 图表
- Canvas 绘制走势图，支持 `devicePixelRatio` 高清适配
- MA5（黄色虚线）/ MA20（蓝色虚线）/ 净值曲线（涨红跌绿）
- 渐变面积图 + 终点圆点

### 周期切换
1周 / 1月（默认）/ 3月 / 6月，切换仅重渲染，不重新拉取数据

### 定时分析
- 顶部状态栏显示时钟、下次运行倒计时、交易状态
- 间隔：30 分钟 / 1 小时 / 2 小时可选
- 开关按钮一键启停

### 图片 OCR
- 上传基金截图，调用 DeepSeek 视觉接口识别基金代码和金额
- 不支持图片时优雅降级，提示手动输入

### 响应式设计
- **移动端（≤600px）**：指标 2 列，卡片头上下布局，按钮高度 ≥44px
- **桌面端**：960px 居中，指标 auto-fit 网格

---

## 🚀 部署说明

本项目为**纯静态单文件**，无需任何构建工具或后端服务。

### 方式一：直接打开
下载 `index.html`，在浏览器中直接打开即可使用（推荐 Chrome / Edge）。

### 方式二：GitHub Pages
1. Fork 本仓库
2. 进入 Settings → Pages
3. Source 选择 `main` 分支 / `/ (root)`
4. 访问 `https://<your-name>.github.io/ai-fund-manager/`

### 方式三：任意静态托管
将 `index.html` 部署到 Vercel、Netlify、Cloudflare Pages 等任意静态托管平台。

---

## 🔑 DeepSeek API Key 获取

1. 前往 [https://platform.deepseek.com](https://platform.deepseek.com) 注册账号
2. 在 API Keys 页面创建密钥（格式：`sk-xxxxxxxx`）
3. 在工具顶部「🔑 DeepSeek API Key 设置」中粘贴并保存

Key 仅保存在本地浏览器的 `localStorage`，不会上传到任何服务器。

---

## 📖 使用方法

1. **添加基金**：在输入框输入 6 位代码（如 `015740`）或搜索名称，点击「+ 添加」
2. **设置持仓**：点击卡片右上角 ✏️ 图标，填写持仓金额和成本净值
3. **一键分析**：点击「🧠 一键获取数据 & AI深度分析」按钮，等待三步完成
4. **查看报告**：AI 分析报告流式输出在页面底部
5. **定时分析**：在顶部选择间隔，点击「▶ 开启」自动定时执行

---

## ⚠️ 免责声明

- 本工具仅供学习和参考，**不构成任何投资建议**
- AI 生成内容可能存在偏差，投资决策请结合自身判断
- 基金投资有风险，入市需谨慎
- 作者不对因使用本工具产生的任何损失承担责任
- 本工具不存储任何用户数据，所有数据均在本地处理

---

## 🛠️ 技术栈

- 纯原生 HTML5 + CSS3 + JavaScript（ES2020+）
- 无任何第三方依赖，无构建工具
- Canvas 2D API 绘图
- Fetch API + ReadableStream 流式输出
- JSONP 跨域数据获取
- localStorage 数据持久化

---

## 📄 License

MIT
